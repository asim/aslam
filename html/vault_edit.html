{{define "vault_edit.html"}}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Edit Vault Item - Aslam</title>
    {{template "style"}}
    <style>
        .edit-form label {
            display: block;
            margin-top: 16px;
            font-size: 0.9em;
            font-weight: bold;
        }
        .edit-form input, .edit-form select, .edit-form textarea {
            width: 100%;
            padding: 8px;
            margin-top: 4px;
            border: 1px solid var(--border-color);
            border-radius: 4px;
            font-family: inherit;
        }
        .edit-form textarea {
            min-height: 100px;
        }
        .edit-form .buttons {
            margin-top: 24px;
            display: flex;
            gap: 12px;
        }
        .edit-form button {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }
        .edit-form button[type="submit"] {
            background: #000;
            color: #fff;
        }
        .edit-form .delete-btn {
            background: #fee;
            color: #c00;
        }
    </style>
</head>
<body>
    <div class="app">
        {{template "header"}}
        <main class="app-content">
            <h2>Edit: {{.Item.Name}}</h2>
            <p class="muted" style="margin-bottom: 20px"><a href="/vault">‚Üê back to vault</a></p>

            <form action="/vault/edit/{{.Item.ID}}" method="POST" class="edit-form">
                <label>Category
                    <select name="category" required>
                        <option value="asset" {{if eq .Item.Category "asset"}}selected{{end}}>Asset</option>
                        <option value="account" {{if eq .Item.Category "account"}}selected{{end}}>Account</option>
                        <option value="person" {{if eq .Item.Category "person"}}selected{{end}}>Person</option>
                        <option value="instruction" {{if eq .Item.Category "instruction"}}selected{{end}}>Instruction</option>
                        <option value="document" {{if eq .Item.Category "document"}}selected{{end}}>Document</option>
                    </select>
                </label>
                <label>Name
                    <input type="text" name="name" value="{{.Item.Name}}" required>
                </label>
                <label>Description
                    <input type="text" name="description" value="{{.Item.Description}}">
                </label>
                <label>Details
                    <textarea name="details">{{.Item.Details}}</textarea>
                </label>
                <label>Credentials
                    <textarea name="credentials">{{.Item.Credentials}}</textarea>
                </label>
                <label>Notes
                    <textarea name="notes">{{.Item.Notes}}</textarea>
                </label>
                <label>Status
                    <select name="status">
                        <option value="active" {{if eq .Item.Status "active"}}selected{{end}}>Active</option>
                        <option value="closed" {{if eq .Item.Status "closed"}}selected{{end}}>Closed</option>
                        <option value="archived" {{if eq .Item.Status "archived"}}selected{{end}}>Archived</option>
                    </select>
                </label>
                <div class="buttons">
                    <button type="submit">Save Changes</button>
                    <a href="/vault"><button type="button">Cancel</button></a>
                </div>
            </form>

            <form action="/vault/delete/{{.Item.ID}}" method="POST" style="margin-top: 40px; padding-top: 20px; border-top: 1px solid var(--border-color);">
                <p class="muted">Danger zone</p>
                <button type="submit" class="delete-btn" onclick="return confirm('Delete this item permanently?')">Delete Item</button>
            </form>
        </main>
    </div>
</body>
</html>
{{end}}
